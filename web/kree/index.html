<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" value="notranslate">
    <title>KREE - Kosmos Rule Engine Editor</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="kree.css">

    <script src="blockly_compressed.js"></script>
    <script src="blocks_compressed.js"></script>
    <script src="javascript_compressed.js"></script>
    <script src="python_compressed.js"></script>
    <script src="../js/jquery-3.5.1.slim.min.js" crossorigin="anonymous"></script>
    <script src="../js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="code.js"></script>




</head>
<body>
<div class="container" id="kosmos_login" >
        <div class="card align-middle align-content-center">
            <div class="card-body">
                <div id="login_error"></div>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="label-username">Username</span>
                    </div>
                    <input type="text" class="form-control" id="username" name="username" placeholder="Username" aria-label="Username"
                           aria-describedby="label-username">
                </div>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="label-password">Password</span>
                    </div>
                    <input type="password" class="form-control" id="password" name="password" placeholder="Password" aria-label="Password"

                           aria-describedby="label-password">
                </div>
                <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" name="save" id="save" checked>
                <label class="form-check-label" for="save">remember</label>

            </div>
            </div>
            <div class="card-footer">
                <button type="submit" class="btn btn-outline-primary" id="btn_login">login</button>

            </div>
            <div id="logindiv" class="card-footer">

            </div>
        </div>

</div>

<div width="100%" height="100%" id="kosmos_workspace" style="display:none">
    <table width="100%" height="100%">

        <tr>
            <td colspan=2>
                <table width="100%">
                    <tr id="tabRow" height="1em">
                        <td id="tab_blocks" class="tabon">...</td>
                        <td class="tabmin tab_collapse">&nbsp;</td>
                        <td id="tab_python" class="taboff tab_collapse">Python</td>
                        <td class="tabmin tab_collapse">&nbsp;</td>
                        <td id="tab_xml" class="taboff tab_collapse">XML</td>
                        <td class="tabmin">&nbsp;</td>
                        <td id="tab_code" class="taboff">
                            <select id="code_menu"></select>
                        </td>
                        <td class="tabmax">
                            <select id="languageMenu"></select>
                            <button id="trashButton" class="btn btn-outline-primary" title="...">
                                clear
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-trash-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"/>
                                </svg>
                            </button>


                            <button id="saveButton" class="btn btn-outline-primary" title="save">
                                save
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-save" viewBox="0 0 16 16">
                                    <path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1H2z"/>
                                </svg>
                            </button>
                            <button id="downloadButton" class="btn btn-outline-primary" title="download">
                                download
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                                    <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                                </svg>
                            </button>

                            <input id='fileid' type='file' hidden accept='.kreexml,.xml'/>

                            <button id="uploadButton" class="btn btn-outline-primary" title="upload">
                                upload
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-load" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"></path>
                                    <path fill-rule="evenodd" d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"></path>
                                </svg>
                            </button>
                        </input>

                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td height="99%" id="content_area" style="width:80%">
            </td>
            <td style="width: 20%"><div id="log"></div></td>
        </tr>
    </table>
    <div id="content_blocks" class="content"></div>
    <pre id="content_javascript" class="content prettyprint lang-js"></pre>
    <pre id="content_python" class="content prettyprint lang-py"></pre>
    <pre id="content_php" class="content prettyprint lang-php"></pre>
    <pre id="content_lua" class="content prettyprint lang-lua"></pre>
    <pre id="content_dart" class="content prettyprint lang-dart"></pre>
    <textarea id="content_xml" class="content" wrap="off"></textarea>

    <xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
        <category name="%{BKY_CATLOGIC}" colour="%{BKY_LOGIC_HUE}">
            <block type="controls_if"></block>
            <block type="logic_compare"></block>
            <block type="logic_operation"></block>
            <block type="logic_negate"></block>
            <block type="logic_boolean"></block>
            <block type="logic_null"></block>
            <block type="logic_ternary"></block>
        </category>
        <category name="%{BKY_CATLOOPS}" colour="%{BKY_LOOPS_HUE}">
            <block type="controls_repeat_ext">
                <value name="TIMES">
                    <shadow type="math_number">
                        <field name="NUM">10</field>
                    </shadow>
                </value>
            </block>
            <block type="controls_whileUntil"></block>
            <block type="controls_for">
                <value name="FROM">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="TO">
                    <shadow type="math_number">
                        <field name="NUM">10</field>
                    </shadow>
                </value>
                <value name="BY">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
            </block>
            <block type="controls_forEach"></block>
            <block type="controls_flow_statements"></block>
        </category>
        <category name="%{BKY_CATMATH}" colour="%{BKY_MATH_HUE}">
            <block type="math_number">
                <field name="NUM">123</field>
            </block>
            <block type="math_arithmetic">
                <value name="A">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="B">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
            </block>
            <block type="math_single">
                <value name="NUM">
                    <shadow type="math_number">
                        <field name="NUM">9</field>
                    </shadow>
                </value>
            </block>
            <block type="math_trig">
                <value name="NUM">
                    <shadow type="math_number">
                        <field name="NUM">45</field>
                    </shadow>
                </value>
            </block>
            <block type="math_constant"></block>
            <block type="math_number_property">
                <value name="NUMBER_TO_CHECK">
                    <shadow type="math_number">
                        <field name="NUM">0</field>
                    </shadow>
                </value>
            </block>
            <block type="math_round">
                <value name="NUM">
                    <shadow type="math_number">
                        <field name="NUM">3.1</field>
                    </shadow>
                </value>
            </block>
            <block type="math_on_list"></block>
            <block type="math_modulo">
                <value name="DIVIDEND">
                    <shadow type="math_number">
                        <field name="NUM">64</field>
                    </shadow>
                </value>
                <value name="DIVISOR">
                    <shadow type="math_number">
                        <field name="NUM">10</field>
                    </shadow>
                </value>
            </block>
            <block type="math_constrain">
                <value name="VALUE">
                    <shadow type="math_number">
                        <field name="NUM">50</field>
                    </shadow>
                </value>
                <value name="LOW">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="HIGH">
                    <shadow type="math_number">
                        <field name="NUM">100</field>
                    </shadow>
                </value>
            </block>
            <block type="math_random_int">
                <value name="FROM">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="TO">
                    <shadow type="math_number">
                        <field name="NUM">100</field>
                    </shadow>
                </value>
            </block>
            <block type="math_random_float"></block>
            <block type="math_atan2">
                <value name="X">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="Y">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
            </block>
        </category>
        <category name="%{BKY_CATTEXT}" colour="%{BKY_TEXTS_HUE}">
            <block type="text"></block>
            <block type="text_join"></block>
            <block type="text_append">
                <value name="TEXT">
                    <shadow type="text"></shadow>
                </value>
            </block>
            <block type="text_length">
                <value name="VALUE">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
            <block type="text_isEmpty">
                <value name="VALUE">
                    <shadow type="text">
                        <field name="TEXT"></field>
                    </shadow>
                </value>
            </block>
            <block type="text_indexOf">
                <value name="VALUE">
                    <block type="variables_get">
                        <field name="VAR">{textVariable}</field>
                    </block>
                </value>
                <value name="FIND">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
            <block type="text_charAt">
                <value name="VALUE">
                    <block type="variables_get">
                        <field name="VAR">{textVariable}</field>
                    </block>
                </value>
            </block>
            <block type="text_getSubstring">
                <value name="STRING">
                    <block type="variables_get">
                        <field name="VAR">{textVariable}</field>
                    </block>
                </value>
            </block>
            <block type="text_changeCase">
                <value name="TEXT">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
            <block type="text_trim">
                <value name="TEXT">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
            <block type="text_print">
                <value name="TEXT">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
            <block type="text_prompt_ext">
                <value name="TEXT">
                    <shadow type="text">
                        <field name="TEXT">abc</field>
                    </shadow>
                </value>
            </block>
        </category>
        <category name="%{BKY_CATLISTS}" colour="%{BKY_LISTS_HUE}">
            <block type="lists_create_with">
                <mutation items="0"></mutation>
            </block>
            <block type="lists_create_with"></block>
            <block type="lists_repeat">
                <value name="NUM">
                    <shadow type="math_number">
                        <field name="NUM">5</field>
                    </shadow>
                </value>
            </block>
            <block type="lists_length"></block>
            <block type="lists_isEmpty"></block>
            <block type="lists_indexOf">
                <value name="VALUE">
                    <block type="variables_get">
                        <field name="VAR">{listVariable}</field>
                    </block>
                </value>
            </block>
            <block type="lists_getIndex">
                <value name="VALUE">
                    <block type="variables_get">
                        <field name="VAR">{listVariable}</field>
                    </block>
                </value>
            </block>
            <block type="lists_setIndex">
                <value name="LIST">
                    <block type="variables_get">
                        <field name="VAR">{listVariable}</field>
                    </block>
                </value>
            </block>
            <block type="lists_getSublist">
                <value name="LIST">
                    <block type="variables_get">
                        <field name="VAR">{listVariable}</field>
                    </block>
                </value>
            </block>
            <block type="lists_split">
                <value name="DELIM">
                    <shadow type="text">
                        <field name="TEXT">,</field>
                    </shadow>
                </value>
            </block>
            <block type="lists_sort"></block>
        </category>
        <category name="%{BKY_CATCOLOUR}" colour="%{BKY_COLOUR_HUE}">
            <block type="colour_picker"></block>
            <block type="colour_random"></block>
            <block type="colour_rgb">
                <value name="RED">
                    <shadow type="math_number">
                        <field name="NUM">100</field>
                    </shadow>
                </value>
                <value name="GREEN">
                    <shadow type="math_number">
                        <field name="NUM">50</field>
                    </shadow>
                </value>
                <value name="BLUE">
                    <shadow type="math_number">
                        <field name="NUM">0</field>
                    </shadow>
                </value>
            </block>
            <block type="colour_blend">
                <value name="COLOUR1">
                    <shadow type="colour_picker">
                        <field name="COLOUR">#ff0000</field>
                    </shadow>
                </value>
                <value name="COLOUR2">
                    <shadow type="colour_picker">
                        <field name="COLOUR">#3333ff</field>
                    </shadow>
                </value>
                <value name="RATIO">
                    <shadow type="math_number">
                        <field name="NUM">0.5</field>
                    </shadow>
                </value>
            </block>
        </category>
        <sep></sep>
        <category name="%{BKY_CATVARIABLES}" colour="%{BKY_VARIABLES_HUE}" custom="VARS"></category>
        <category name="%{BKY_CATFUNCTIONS}" colour="%{BKY_PROCEDURES_HUE}" custom="PROCEDURE"></category>
        <category name="Kosmos Timer" custom="KOSMOS_TIMER">

        </category>
        <category name="Kosmos Clamps" custom="KOSMOS_CLAMP">

        </category>
        <category name="Kosmos Lists" custom="KOSMOS_LISTS">
            <block type="kosmos_lists_create_with"></block>
        </category>

        <category name="Schreibtrainer">
            <block type="kosmos_word_match"></block>
            <block type="kosmos_create_wordlist"></block>
            <block type="kosmos_create_named_wordlist"></block>
        </category>
        <category name="Regex">
            <block type="kosmos_regex"></block>

        </category>
        <category name="ConText">
            <category name="Patches">
                <block type="context_light_patch_1">

                    <value name="PATCH">
                        <block type="kosmos_get_uuid_patch">

                        </block>
                    </value>
                    <value name="DEVICE">
                        <block type="kosmos_get_uuid_color">

                        </block>
                    </value>
                    <value name="COLORS">
                        <block type="lists_create_with">
                            <field name="VARNAME" >colorlist</field>
                            <mutation items="3"></mutation>

                            <value name="ADD0">
                                <block type="colour_picker">
                                    <field name="COLOUR">#ffff00</field>
                                </block>
                            </value>
                            <value name="ADD1">
                                <block type="colour_picker">
                                    <field name="COLOUR">#ff00ff</field>
                                </block>
                            </value>
                            <value name="ADD2">
                                <block type="colour_picker">
                                    <field name="COLOUR">#00ffff</field>
                                </block>
                            </value>
                        </block>
                    </value>
                </block>
                <block type="context_light_patch_2">

                    <value name="COLORS">
                        <block type="lists_create_with">
                            <field name="VARNAME" >colorlist</field>
                            <mutation items="3"></mutation>

                            <value name="ADD0">
                                <block type="colour_picker" >
                                    <field name="COLOUR">#ffff00</field>
                                </block>
                            </value>
                            <value name="ADD1">
                                <block type="colour_picker" >
                                    <field name="COLOUR">#ff00ff</field>
                                </block>
                            </value>
                            <value name="ADD2">
                                <block type="colour_picker" >
                                    <field name="COLOUR">#00ffff</field>
                                </block>
                            </value>
                        </block>
                    </value>
                </block>
                <block type="patch_heating"></block>
            <block type="kosmos_context_trigger_on_shortpress"></block>
            <block type="kosmos_context_trigger_on_shortpress2"></block>
            <block type="kosmos_context_trigger_on_longpress"></block>
            <block type="kosmos_context_trigger_on_longpress2"></block>
            </category>
            <category name="Gestures">
            <block type="kosmos_trigger_on_gesture"></block>
            <block type="kosmos_trigger_on_gesture2"></block>

            </category>


        </category>
        <category name="Kosmos set device">
            <category name="Kosmos Generic">
            <block type="kosmos_set_name">

            </block>
                <block type="kosmos_change">
                </block>
                <block type="kosmos_change_var">
                </block>
                <block type="kosmos_set_value">
                    <field name="PROPERTY">property</field>
                    <field name="UUID">device</field>
                </block>
                <block type="kosmos_set_value2">


                </block>
                <block type="kosmos_set_value3">
                    <field name="PROPERTY">property</field>
                    <field name="UUID">device</field>

                </block>
                <block type="kosmos_set_device">
                    <field name="UUID">device</field>
                </block>
                <block type="kosmos_set_device2">

                </block>

                <block type="kosmos_set_device3">
                    <value name="INPUT">
                        <block type="object">
                            <value name="MEMBERS">
                                <block type="member">

                                </block>
                            </value>
                        </block>
                    </value>
                </block>
            </category>
            <category name="Kosmos Heating">
                <block type="kosmos_change_temp">
                </block>
                <block type="kosmos_change_temp_var">
                </block>
            </category>
            <category name="Kosmos Lamp">

            <block type="kosmos_turn_off"></block>
            <block type="kosmos_turn_on"></block>
            <block type="kosmos_turn_off_var"></block>
            <block type="kosmos_turn_on_var"></block>
                <block type="kosmos_set_color">
                    <value name="COLOR">
                        <block type="colour_picker">
                        </block>
                    </value>
                </block>
                <block type="kosmos_set_color_text_var">
                    <value name="COLOR">
                        <block type="colour_picker">
                        </block>
                    </value>
                    <value name="TEXT">
                        <block type="text" >
                            <field name="TEXT">Test</field>
                        </block>
                    </value>
                </block>
                <block type="kosmos_set_color_text">
                    <value name="COLOR">
                        <block type="colour_picker">
                        </block>
                    </value>
                    <value name="TEXT">
                        <block type="text" >
                            <field name="TEXT">Test</field>
                        </block>
                    </value>
                </block>
                <block type="kosmos_set_text_var">

                    <value name="TEXT">
                        <block type="text" >
                            <field name="TEXT">Test</field>
                        </block>
                    </value>
                </block>
                <block type="kosmos_set_text">

                    <value name="TEXT">
                        <block type="text" >
                            <field name="TEXT">Test</field>
                        </block>
                    </value>
                </block>
                <block type="kosmos_set_color_var">
                    <value name="COLOR">
                        <block type="colour_picker">
                        </block>
                    </value>
                </block>
                <block type="kosmos_set_color_brightness">
                    <value name="COLOR">
                        <block type="colour_picker">
                        </block>
                    </value>
                    <value name="BRIGHTNESS">
                        <block type="math_number">
                            <field name="NUM">255</field>

                        </block>
                    </value>
                </block>
                <block type="kosmos_set_color_brightness_var">
                    <value name="COLOR">
                        <block type="colour_picker">
                        </block>
                    </value>
                    <value name="BRIGHTNESS">
                        <block type="math_number">
                            <field name="NUM">255</field>

                        </block>
                    </value>
                </block>

            </category>


        </category>
        <category name="Kosmos get device">
            <block type="kosmos_get_value">
                <field name="PROPERTY">property</field>
                <field name="UUID">device</field>
            </block>
            <block type="kosmos_get_value2">

            </block>
            <block type="kosmos_get_value3">

            </block>
        </category>
        <category name="Kosmos devices">
            <block type="kosmos_create_device"></block>

            <block type="kosmos_get_uuid">

            </block>
            <block type="kosmos_get_name">

            </block>
            <block type="kosmos_get_name_var">

            </block>

        </category>
        <category name="Kosmos JSON">
            <block type="object"></block>
            <block type="member"></block>
            <block type="member2"></block>

            <block type="math_number"><field name="NUM">0</field></block>
            <block type="text"><field name="TEXT"/></block>
            <block type="logic_boolean"><field name="BOOL">TRUE</field></block>
            <block type="logic_null"/>
            <block type="lists_create_with"><mutation items="3"/></block>
        </category>

        <category name="Kosmos">
            <block type="kosmos_connect"></block>

            <block type="kosmos_lists_create_with"></block>
            <block type="kosmos_delay"></block>
            <block type="kosmos_load_variable"></block>
            <block type="kosmos_function">
                <value name="PARAMS">
                    <block type="lists_create_with">

                    </block>
                </value>
            </block>
            <block type="kosmos_trigger_on_change_all">
                <value name="DO">
                    <block type="text_print" >
                        <value name="TEXT">
                            <block type="text_join" >
                                <mutation items="6"></mutation>
                                <value name="ADD0">
                                    <block type="text" >
                                        <field name="TEXT">Change detected on uuid: </field>
                                    </block>
                                </value>
                                <value name="ADD1">
                                    <block type="variables_get" >
                                        <field name="VAR">uuid</field>
                                    </block>
                                </value>
                                <value name="ADD2">
                                    <block type="text" >
                                        <field name="TEXT"> property: </field>
                                    </block>
                                </value>
                                <value name="ADD3">
                                    <block type="variables_get">
                                        <field name="VAR" >property</field>
                                    </block>
                                </value>
                                <value name="ADD4">
                                    <block type="text" >
                                        <field name="TEXT"> value: </field>
                                    </block>
                                </value>
                                <value name="ADD5">
                                    <block type="variables_get">
                                        <field name="VAR" >value</field>
                                    </block>
                                </value>
                            </block>
                        </value>
                    </block>
                </value>
            </block>
            <block type="kosmos_trigger_on_change">
                <field name="UUID">device</field>
            </block>
            <block type="kosmos_trigger_on_property_change">
                <field name="PROPERTY">property</field>
                <field name="UUID">device</field>
            </block>

            <block type="kosmos_change_property">
                <field name="PROPERTY">property</field>
                <field name="UUID">device</field>
            </block>

        </category>
    </xml>
</div>
</body>
</html>
